type typeA.
type typeB.
free ch: channel [private].

event sendA().
event sendB().
event receiveA().
event receiveB().

query event(sendA).
query event(sendB).
query event(receiveA).
query event(receiveB).

let pA(vA: typeA) = 

  event sendA();
  out(ch, vA);
  in(ch, vB: typeB);
  event receiveB()
  .

let pB(vB: typeB) = 

  in(ch, vA: typeA);
  event receiveA();
  event sendB();
  out(ch, vB)
  .
process
   new vA: typeA; new vB: typeB;
   pA(vA) | pB(vB)